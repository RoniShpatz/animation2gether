{% extends "game/base_generic.html" %}


{% block content %}
{% if messages %}
    {% for message in messages %}
        <div class="alert {% if message.tags == 'error' %}alert-danger{% else %}alert-success{% endif %}">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

<div class="posts-container">
    <h1>Posts</h1>
    
    <div class="posts-list">
        {% for post in posts %}
        <div class="post-card">
            <div class="post-header">
                <h2>{{ post.title }}</h2>
                <div class="post-meta">
                    Posted by {{ post.author.username }} on {{ post.created_at|date:"F j, Y" }}
                </div>
                <div class="post-content">
                    {{ post.content|linebreaks }}
                </div>
            </div>
            
            {% if post.animation %}
            <div class="post-animation">
                <img src="{{ post.animation.animation_file.url }}" 
                     alt="{{ post.animation.animation_name|default:'Animation' }}">
                {% if post.animation.animation_name %}
                <p class="animation-name"> {{ post.animation.animation_name }}</p>
                {% endif %}
            </div>
            {% endif %}
            

            
            {% if user == post.author %}
            <div class="post-actions">
                <a href="{% url 'blog:post_edit' post.id %}" class="edit-button">Edit Post</a>
                <a href="{% url 'blog:post_delete' post.id %}" 
                   class="delete-button"
                   onclick="return confirm('Are you sure you want to delete this post?')">Delete</a>
            </div>
            {% endif %}
        </div>
        {% empty %}
        <div class="no-posts">
            <p>No posts available.</p>
        </div>
        {% endfor %}
    </div>
    

</div>
     

</div>

{% endblock %}